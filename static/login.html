<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Accesso - Psicologo Virtuale</title>
  <!-- Bootstrap CSS (lasciato per compatibilità con il widget) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            therapy: {
              blue: '#4682B4',
              darkblue: '#2c5282',
              lightblue: '#63b3ed',
              gray: '#f2f2f2',
              darkgray: '#333333',
            },
          },
        },
      },
    }
  </script>
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background: #fafafa;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%234682B4' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    /* Effetto di parallax per l'header */
    .parallax-header {
      position: relative;
      overflow: hidden;
      height: 250px; /* Aumentata altezza per mobile */
      background: linear-gradient(135deg, #4682B4 0%, #2c5282 100%);
    }
    
    @media (min-width: 768px) {
      .parallax-header {
        height: 220px; /* Altezza originale per desktop */
      }
    }
    
    .parallax-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5z' fill='%23ffffff' fill-opacity='0.08'/%3E%3C/svg%3E");
      opacity: 0.8;
      z-index: 0;
    }
    
    .parallax-header-content {
      position: relative;
      z-index: 1;
    }
    
    .header-wave {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      overflow: hidden;
      line-height: 0;
      transform: rotate(180deg);
      height: 46px; /* Altezza fissa per l'onda */
    }

    .header-wave svg {
      position: relative;
      display: block;
      width: calc(100% + 1.3px);
      height: 46px;
    }

    .header-wave .shape-fill {
      fill: #FFFFFF;
    }

    .therapy-blue {
      background-color: #4682B4;
    }
    
    .therapy-text-blue {
      color: #4682B4;
    }

    /* Animazione per il logo */
    @keyframes pulse-subtle {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse-animation {
      animation: pulse-subtle 3s infinite ease-in-out;
    }

    /* Card con effetti avanzati */
    .card-3d {
      transition: all 0.3s ease;
      box-shadow: 0 8px 30px rgba(70, 130, 180, 0.1);
      background: white;
      border-radius: 16px;
      overflow: hidden;
      transform: translateZ(0);
      backface-visibility: hidden;
    }
    
    .card-3d:hover {
      transform: translateY(-5px) translateZ(0);
      box-shadow: 0 15px 35px rgba(70, 130, 180, 0.15);
    }
    
    .card-header {
      border-bottom: 1px solid rgba(0,0,0,0.05);
      background: linear-gradient(to right, #f9f9f9, #ffffff);
      padding: 1.25rem 1.5rem;
    }
    
    /* Bottoni con effetti moderni */
    .btn-therapy {
      background: linear-gradient(135deg, #4682B4 0%, #2c5282 100%);
      color: white;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(70, 130, 180, 0.3);
      border: none;
    }
    
    .btn-therapy:hover {
      background: linear-gradient(135deg, #63b3ed 0%, #4682B4 100%);
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(70, 130, 180, 0.4);
    }
    
    .btn-therapy::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }
    
    .btn-therapy:hover::after {
      animation: ripple 1s ease-out;
    }
    
    @keyframes ripple {
      0% {
        transform: scale(0, 0);
        opacity: 0.5;
      }
      100% {
        transform: scale(20, 20);
        opacity: 0;
      }
    }
    
    /* Input con effetti moderni */
    .input-therapy {
      transition: all 0.3s ease;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      padding: 0.75rem 1rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }
    
    .input-therapy:focus {
      border-color: #4682B4;
      box-shadow: 0 0 0 4px rgba(70, 130, 180, 0.15);
      outline: none;
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Header parallax con effetto onda -->
  <header class="parallax-header mb-12">
    <div class="parallax-header-content h-full flex items-center justify-center">
      <div class="text-center px-4 pb-12 md:pb-4"> <!-- Aggiunto padding-bottom per dispositivi mobili -->
        <div class="pulse-animation inline-block bg-white p-4 rounded-full shadow-lg mb-4">
          <svg class="w-20 h-20" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="50" fill="white"/>
            <path d="M30 70C30 57.85 39.85 48 52 48H70V70H30Z" fill="#4682B4"/>
            <path d="M52 30H30V48H52C55.3137 48 58 45.3137 58 42V36C58 32.6863 55.3137 30 52 30Z" fill="#4682B4"/>
          </svg>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-2 tracking-tight">Psicologo Virtuale</h1>
      </div>
    </div>
    <div class="header-wave">
      <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
        <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" class="shape-fill"></path>
      </svg>
    </div>
  </header>
  
  <div class="max-w-md mx-auto px-4">
    <!-- Login Form -->
    <section class="card-3d mb-12" data-aos="fade-up" data-aos-duration="1000">
      <div class="card-header">
        <h2 class="text-2xl font-semibold text-gray-800 flex items-center">
          <i class="fas fa-lock therapy-text-blue mr-3"></i>
          Accedi
        </h2>
      </div>
      <div class="p-6">
        <div id="loginAlert" class="hidden mb-4 p-3 rounded-lg text-sm"></div>
        
        <form id="loginForm">
          <div class="mb-4">
            <label for="email" class="block text-gray-700 mb-2">Email</label>
            <input 
              type="email" 
              id="email" 
              class="input-therapy w-full" 
              placeholder="email@esempio.com"
              required>
          </div>
          
          <div class="mb-6">
            <label for="password" class="block text-gray-700 mb-2">Password</label>
            <input 
              type="password" 
              id="password" 
              class="input-therapy w-full" 
              placeholder="La tua password"
              required>
          </div>
          
          <div class="flex items-center justify-between mb-4">
            <div class="flex items-center">
              <input 
                type="checkbox" 
                id="remember" 
                class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
              <label for="remember" class="ml-2 block text-sm text-gray-700">Ricordami</label>
            </div>
            
            <a href="#" class="text-sm text-blue-600 hover:text-blue-800">Password dimenticata?</a>
          </div>
          
          <button 
            type="submit" 
            id="loginButton"
            class="btn-therapy w-full font-medium py-3 px-6 rounded-full flex items-center justify-center">
            <i class="fas fa-sign-in-alt mr-2"></i>
            Accedi
          </button>
        </form>
        
        <div class="mt-6 text-center text-sm text-gray-600">
          <span>Non hai un account?</span>
          <a href="#" class="text-blue-600 hover:text-blue-800 ml-1 font-medium">Registrati</a>
        </div>
      </div>
    </section>
    
    <!-- Note per demo -->
    <div class="bg-blue-50 p-4 rounded-lg border border-blue-100 mb-12">
      <h3 class="text-blue-700 font-medium mb-2">Note per la Demo</h3>
      <p class="text-sm text-gray-700 mb-2">
        Questo è un sistema di autenticazione dimostrativo che accetta qualsiasi combinazione di email e password valida.
      </p>
      <p class="text-sm text-gray-700">
        <strong>Consiglio:</strong> Inserisci un'email valida (es. user@example.com) e qualsiasi password.
      </p>
    </div>
  </div>
  
  <!-- Footer -->
  <footer class="text-center text-gray-600 py-8 mb-6">
    <div class="flex items-center justify-center mb-4">
      <svg class="w-8 h-8 mr-3" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="50" fill="#4682B4"/>
        <path d="M30 70C30 57.85 39.85 48 52 48H70V70H30Z" fill="white"/>
        <path d="M52 30H30V48H52C55.3137 48 58 45.3137 58 42V36C58 32.6863 55.3137 30 52 30Z" fill="white"/>
      </svg>
      <span class="text-lg font-medium">Psicologo Virtuale</span>
    </div>
    <p class="mb-4">© 2025 Psicologo Virtuale - Tutti i diritti riservati</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const loginForm = document.getElementById('loginForm');
      const loginAlert = document.getElementById('loginAlert');
      const loginButton = document.getElementById('loginButton');
      
      function showAlert(message, type) {
        loginAlert.textContent = message;
        loginAlert.classList.remove('hidden', 'bg-red-100', 'text-red-700', 'bg-green-100', 'text-green-700');
        
        if (type === 'error') {
          loginAlert.classList.add('bg-red-100', 'text-red-700');
        } else if (type === 'success') {
          loginAlert.classList.add('bg-green-100', 'text-green-700');
        }
      }
      
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        // Validazione base
        if (!email || !password) {
          showAlert('Inserisci sia email che password', 'error');
          return;
        }
        
        // Disabilita il pulsante di invio e mostra loading
        loginButton.disabled = true;
        loginButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Accesso in corso...';
        
        // Chiamata API al backend
        fetch('/api/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            email: email,
            password: password
          })
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            showAlert('Accesso effettuato con successo! Reindirizzamento...', 'success');
            
            // Reindirizza alla pagina principale
            setTimeout(() => {
              window.location.href = '/';
            }, 1000);
          } else {
            showAlert(data.message || 'Errore durante il login', 'error');
            loginButton.disabled = false;
            loginButton.innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i> Accedi';
          }
        })
        .catch(error => {
          console.error('Errore:', error);
          showAlert('Si è verificato un errore durante la comunicazione con il server', 'error');
          loginButton.disabled = false;
          loginButton.innerHTML = '<i class="fas fa-sign-in-alt mr-2"></i> Accedi';
        });
      });
    });
  </script>
</body>
</html>